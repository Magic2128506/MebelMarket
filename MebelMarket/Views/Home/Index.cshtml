@model FurnitureViewModel
@inject IFurnitureData catalog;
@using MebelMarket.Infrastructure.Interfaces
@using MebelMarket.Infrastructure.Mapping
@using System.IO

@{
    ViewData["Title"] = "МебельМаркет - качественная мебель по доступным ценам";
}

<!-- ...:::: Start Banner & Hero Area Section:::... -->
<div class="banner-and-hero-area-section">
    <div class="container">
        <div class="row flex-column-reverse flex-lg-row">
            <div class="col-lg-4">
                <div class="banner-sidebar mt-30">
                    <!-- Start Banner Single -->
                    <div class="banner-single mb-30">
                        <a asp-controller="Furniture" asp-action="Grid" asp-route-id="0" class="banner-img-link">
                            <img class="banner-img opacity-50" src="~/images/banner_images/homeFurniture.png" alt="">
                        </a>
                        <div class="banner-content">
                            <h3 class="banner-text-large">Мебель для дома</h3>
                            <a asp-controller="Furniture" asp-action="Grid" asp-route-id="0" class="hero-button">Перейти в каталог</a>
                        </div>
                    </div> <!-- End Banner Single -->
                    <!-- Start Banner Single -->
                    <div class="banner-single">
                        <a asp-controller="Furniture" asp-action="Grid" asp-route-id="0" class="banner-img-link">
                            <img class="banner-img opacity-50" src="~/images/banner_images/officeFurniture.png" alt="">
                        </a>
                        <div class="banner-content">
                            <h3 class="banner-text-large">Офисная мебель</h3>
                            <a asp-controller="Furniture" asp-action="Grid" asp-route-id="0" class="hero-button">Перейти в каталог</a>
                        </div>
                    </div> <!-- End Banner Single -->
                </div>
            </div>
            <div class="col-lg-8">
                <!-- ...:::: Start Hero Area Section:::... -->
                <div class="hero-area-wrapper hero-slider-dots fix-slider-dots">
                    @{
                        var list = catalog.GetNewList().Take(3);
                        var url = $"{ViewBag.wwwroot}/images/products_images/";

                        foreach (var product in list)
                        {
                            <div class="hero-area-single">
                                <div class="hero-area-bg-2">

                                    @if (File.Exists($"{url}/{product.Id}L.jpg"))
                                    {
                                        url = $"/images/products_images/{product.Id}L.jpg";

                                        <img class="hero-img-2 opacity-50" src="@url" alt="">
                                    }
                                    else
                                    {
                                        <img class="hero-img-2 opacity-50" src="~/images/products_images/defaultL.jpg" alt="">
                                    }


                                </div>
                                <div class="hero-content hero-content-2">
                                    <div class="row">
                                        <div class="col-10 col-md-8 col-xl-6 offset-1">
                                            <h2>@product.Name</h2>
                                            <h5>@product.Description</h5>
                                            <br />
                                            <p class="hero-text">
                                                @{
                                                    var priceValue = String.Format("{0:0.##}", product.Price);

                                                    if (product.DiscountValue != null)
                                                    {
                                                        <del class="product-default-price-off">@priceValue</del>
                                                        var price = product.Price * (100 - product.DiscountValue.Value) / 100;
                                                        var discountPriceValue = String.Format("{0:0.##}", price);
                                                        @discountPriceValue
                                                    }
                                                    else
                                                    {
                                                        @priceValue
                                                    }
                                                }
                                            </p>
                                            <a asp-controller="Furniture" asp-action="Index" asp-route-id="@product.Id" class="hero-button">Подробнее</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    }
                </div> <!-- ...:::: End Hero Area Section:::... -->
            </div>
        </div>
    </div>
</div> <!-- ...:::: End Banner & Hero Area Section:::... -->

<!-- ...:::: Start Product Tab Section:::... -->
<div class="product-tab-section section-top-gap-100">
    <!-- Start Section Content -->
    <div class="section-content-gap">
        <div class="container">
            <div class="row">
                <div class="section-content d-flex justify-content-between align-items-md-center align-items-start flex-md-row flex-column">
                    <h3 class="section-title">Распродажа</h3>
                </div>
            </div>
        </div>
    </div> <!-- End Section Content -->
    <!-- Start Tab Wrapper -->
    <div class="product-tab-wrapper">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="tab-content tab-animate-zoom">
                        <div class="tab-pane show active">
                            <div class="product-default-slider product-default-slider-4grids-1row">
                                <partial name="Partial/_FurnitureFromSlider" model="@catalog.GetFeaturedList().ToView()" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> <!-- End Catagory Wrapper -->
</div> <!-- ...:::: End Product Tab Section:::... -->